<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Advanced Financial Data Table</title>
        <link rel="stylesheet" href="styles.css">
    </head>
</head>
<body>
    <!-- Enhanced Navigation -->
    <div class="table-nav">
        <div class="nav-group">
            <div class="search-container">
                <input 
                    type="text" 
                    class="table-search" 
                    id="tableSearch" 
                    placeholder="Search stocks, companies, or sectors..."
                    autocomplete="off"
                    spellcheck="false"
                >
                <div class="search-icon">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M7.333 12.667A5.333 5.333 0 1 0 7.333 2a5.333 5.333 0 0 0 0 10.667zM14 14l-2.9-2.9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
        </div>
        <div class="nav-group">
            <div class="view-controls">
                <button class="view-btn active" data-view="all">All Data</button>
                <button class="view-btn" data-view="performance">Performance</button>
                <button class="view-btn" data-view="fundamentals">Fundamentals</button>
            </div>
        </div>
    </div>

    <!-- Enhanced Table Container -->
    <div class="data-table-container">
        <table class="data-table" id="financial-table">
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Company Name</th>
                    <th>Relevance to Data Centers</th>
                    <th>Data Center Categorization</th>
                    <th>Market Cap</th>
                    <th>Exchange</th>
                    <th>Industry</th>
                    <th>Sector</th>
                    <th>Country</th>
                    <th class="align-right">1D Change</th>
                    <th class="align-right">1W Change</th>
                    <th class="align-right">1M Change</th>
                    <th class="align-right">3M Change</th>
                    <th class="align-right">6M Change</th>
                    <th class="align-right">YTD Change</th>
                    <th class="align-right">1Y Change</th>
                    <th class="align-right">3Y Change</th>
                    <th class="align-right">5Y Change</th>
                    <th class="align-right">10Y Change</th>
                    <th class="align-right">15Y Change</th>
                    <th class="align-right">20Y Change</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be populated dynamically -->
            </tbody>
        </table>
        <div class="loading-overlay">
            <div class="loading-spinner"></div>
        </div>
    </div>

<!-- Core System Scripts -->
<script src="financial-data-system.js"></script>

<!-- Data Fetching Script -->
<script src="data-fetcher.js"></script>

<!-- System Initialization -->
<script>
    // Ensure proper loading order and system initialization
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize core systems
        window.FinancialSystem = {
            dataManager: new FinancialDataManager(),
            initialized: true
        };

        // Start data fetch after system initialization
        if (typeof fetchGoogleSheetJSON === 'function') {
            fetchGoogleSheetJSON();
        } else {
            console.error('Data fetching system not properly loaded');
        }
    });
</script>

</body>
</html>